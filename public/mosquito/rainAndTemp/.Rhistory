library(weatherData)
library(pingr)
#Establish start and end dates
startDate <- "2008-03-01"
nDays <- 2200
startDate + nDays
as.Date(startDate, format="%Y-%m-%d") + nDays
library(pingr)
ping()
startDate <- "2008-03-01"
nDays <- 2200
#Set up URL
linkPart1 <- "http://www.wunderground.com/history/airport/KGNV/"
linkPart3 <-  "/DailyHistory.html"
ts <- as.data.frame(c(as.Date(startDate, format="%Y-%m-%d"),
as.Date(startDate, format="%Y-%m-%d")+1:(nDays-1)))
colnames(ts) <- "date"
ts$dateRec <- format(ts$date, format="%Y/%m/%d")
startDate <- "2008-03-01"
nDays <- 30
as.Date(startDate, format="%Y-%m-%d") + nDays
linkPart1 <- "http://www.wunderground.com/history/airport/KGNV/"
linkPart3 <-  "/DailyHistory.html"
ts <- as.data.frame(c(as.Date(startDate, format="%Y-%m-%d"),
as.Date(startDate, format="%Y-%m-%d")+1:(nDays-1)))
colnames(ts) <- "date"
ts$dateRec <- format(ts$date, format="%Y/%m/%d")
#RAINFALL DATA
ts$pui <- NA
for (i in 1:nrow(ts)){
linkPart2 <- ts$dateRec[i]
link <- paste0(linkPart1, linkPart2, linkPart3)
webPage <- readLines(link)
webPage <- webPage[grepl("  <span class=\"nobr\"><span class=\"b\">", webPage) &
grepl("</span>&nbsp;in</span>", webPage)][1]
ts$pui[i] <- as.numeric(gsub(paste0("  <span class=\"nobr\"><span class=\"b\">",
"|", "</span>&nbsp;in</span>"),
"",
webPage))
}
ts$rain <- ts$pui
ts$pui <- NULL
ts$rain[is.na(ts$rain)] <- 0
write.csv(ts, "C:/Users/BrewJR/Desktop/mar2008rain.csv")
View(ts)
tsRain <- read.csv("E:/workingdirectory/mosquito/rainAndTemp/a_rain2008-2013.csv")
tsMosq <- read.csv("E:/workingdirectory/mosquito/simple.csv")
